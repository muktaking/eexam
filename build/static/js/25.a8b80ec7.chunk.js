(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[25],{153:function(e,a,t){"use strict";var r=t(6),n=t(11),o=t(128),s=t.n(o),l=t(0),c=t.n(l),i=t(129),d=t(137),m=t(147),u=t(168),p=c.a.forwardRef((function(e,a){var t=e.bsPrefix,o=e.className,l=e.variant,d=e.as,m=void 0===d?"img":d,u=Object(n.a)(e,["bsPrefix","className","variant","as"]),p=Object(i.b)(t,"card-img");return c.a.createElement(m,Object(r.a)({ref:a,className:s()(l?p+"-"+l:p,o)},u))}));p.displayName="CardImg",p.defaultProps={variant:null};var g=p,h=Object(m.a)("h5"),f=Object(m.a)("h6"),b=Object(d.a)("card-body"),C=c.a.forwardRef((function(e,a){var t=e.bsPrefix,o=e.className,d=e.bg,m=e.text,p=e.border,g=e.body,h=e.children,f=e.as,C=void 0===f?"div":f,v=Object(n.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),E=Object(i.b)(t,"card"),y=Object(l.useMemo)((function(){return{cardHeaderBsPrefix:E+"-header"}}),[E]);return c.a.createElement(u.a.Provider,{value:y},c.a.createElement(C,Object(r.a)({ref:a},v,{className:s()(o,E,d&&"bg-"+d,m&&"text-"+m,p&&"border-"+p)}),g?c.a.createElement(b,null,h):h))}));C.displayName="Card",C.defaultProps={body:!1},C.Img=g,C.Title=Object(d.a)("card-title",{Component:h}),C.Subtitle=Object(d.a)("card-subtitle",{Component:f}),C.Body=b,C.Link=Object(d.a)("card-link",{Component:"a"}),C.Text=Object(d.a)("card-text",{Component:"p"}),C.Header=Object(d.a)("card-header"),C.Footer=Object(d.a)("card-footer"),C.ImgOverlay=Object(d.a)("card-img-overlay");a.a=C},198:function(e,a,t){"use strict";var r=t(6),n=t(11),o=t(128),s=t.n(o),l=t(0),c=t.n(l),i=t(148),d=t(159),m=t(137),u=t(147),p=t(129),g=t(169),h=t(176),f=t(154),b={show:!0,transition:g.a,closeLabel:"Close alert"},C={show:"onClose"},v=c.a.forwardRef((function(e,a){var t=Object(i.a)(e,C),o=t.bsPrefix,l=t.show,m=t.closeLabel,u=t.className,g=t.children,f=t.variant,b=t.onClose,v=t.dismissible,E=t.transition,y=Object(n.a)(t,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),O=Object(p.b)(o,"alert"),j=Object(d.a)((function(e){b(!1,e)})),N=c.a.createElement("div",Object(r.a)({role:"alert"},E?y:void 0,{className:s()(u,O,f&&O+"-"+f,v&&O+"-dismissible")}),v&&c.a.createElement(h.a,{onClick:j,label:m}),g);return E?c.a.createElement(E,Object(r.a)({unmountOnExit:!0,ref:a},y,{in:l}),N):l?N:null})),E=Object(u.a)("h4");E.displayName="DivStyledAsH4",v.displayName="Alert",v.defaultProps=b,v.Link=Object(m.a)("alert-link",{Component:f.a}),v.Heading=Object(m.a)("alert-heading",{Component:E}),a.a=v},245:function(e,a,t){"use strict";var r=t(6),n=t(11),o=t(128),s=t.n(o),l=t(0),c=t.n(l),i=t(148),d=t(129),m=t(150),u=c.a.createContext(null);var p=c.a.forwardRef((function(e,a){var t=e.as,o=void 0===t?"button":t,s=e.children,i=e.eventKey,d=e.onClick,p=Object(n.a)(e,["as","children","eventKey","onClick"]),g=function(e,a){var t=Object(l.useContext)(u),r=Object(l.useContext)(m.a);return function(n){r(e===t?null:e,n),a&&a(n)}}(i,d);return c.a.createElement(o,Object(r.a)({ref:a,onClick:g},p),s)})),g=t(214),h=c.a.forwardRef((function(e,a){var t=e.children,o=e.eventKey,s=Object(n.a)(e,["children","eventKey"]),i=Object(l.useContext)(u);return c.a.createElement(g.a,Object(r.a)({ref:a,in:i===o},s),c.a.createElement("div",null,c.a.Children.only(t)))}));h.displayName="AccordionCollapse";var f=h,b=c.a.forwardRef((function(e,a){var t=Object(i.a)(e,{activeKey:"onSelect"}),o=t.as,l=void 0===o?"div":o,p=t.activeKey,g=t.bsPrefix,h=t.children,f=t.className,b=t.onSelect,C=Object(n.a)(t,["as","activeKey","bsPrefix","children","className","onSelect"]);return g=Object(d.b)(g,"accordion"),c.a.createElement(u.Provider,{value:p},c.a.createElement(m.a.Provider,{value:b},c.a.createElement(l,Object(r.a)({ref:a},C,{className:s()(f,g)}),h)))}));b.Toggle=p,b.Collapse=f;a.a=b},608:function(e,a,t){"use strict";t.r(a);var r=t(52),n=t(43),o=t(44),s=t(46),l=t(45),c=t(47),i=t(28),d=t.n(i),m=t(0),u=t.n(m),p=t(605),g=t(604),h=t(245),f=t(198),b=t(175),C=t(153),v=t(182),E=t(23),y=t(181),O=t.n(y),j=t(145),N=t(139),I=t(51),S=t(57),k=t(71),w=t(208),x=function(e){var a=e.submitHandler,t=e.handleChange,r=e.formErrors,n=e.categories,o=e.name,s=e.selectOptionValueRef,l=e.category,c=e.showEditCategoryAccordionStateHandler;return u.a.createElement(h.a,{className:"mt-3",defaultActiveKey:o&&"0"},u.a.createElement(h.a.Toggle,{as:C.a.Header,eventKey:"0"},u.a.createElement("h3",null," ",o?"Edit "+o:"Create A New"," Category")),u.a.createElement(h.a.Collapse,{eventKey:"0"},u.a.createElement(w.a,{className:"mt-2",onSubmit:a,enctype:"multipart/form-data"},u.a.createElement(w.a.Group,{controlId:"formGroupCategoryName"},u.a.createElement(w.a.Label,null,"Category Name"),u.a.createElement(w.a.Control,{type:"text",placeholder:"Category Name",name:"name",value:l?l.name:null,onChange:t}),r.name.length>0&&u.a.createElement("span",{className:"errorMessage"},r.name)),u.a.createElement(w.a.Group,{controlId:"formGridParent"},u.a.createElement(w.a.Label,null,"Parent Category"),u.a.createElement(w.a.Control,{as:"select",name:"parentId",onChange:t,ref:s},u.a.createElement("option",{value:"Top"},"Top"),n.map((function(e){var a=e.slug.replace(/_/g," / ");return u.a.createElement("option",{value:e.id,selected:l&&e.id===l.parentId},a)}))),r.parentId.length>0&&u.a.createElement("span",{className:"errorMessage"},r.parentId)),u.a.createElement(w.a.Group,{controlId:"formGroupCategoryOrder"},u.a.createElement(w.a.Label,null,"Category Order"),u.a.createElement(w.a.Control,{type:"text",name:"order",value:l&&l.order,placeholder:"e.g. 5 <..Order makes priority. Lower value higher order..>",onChange:t}),r.order.length>0&&u.a.createElement("span",{className:"errorMessage"},r.order)),u.a.createElement(w.a.Group,{controlId:"formGroupCategoryDes"},u.a.createElement(w.a.Label,null,"Description"),u.a.createElement(w.a.Control,{type:"textarea",placeholder:"Enter short description",name:"description",value:l&&l.description,onChange:t}),r.description.length>0&&u.a.createElement("span",{className:"errorMessage"},r.description)),u.a.createElement(w.a.Group,null,u.a.createElement(w.a.Label,null,"Upload Image"),u.a.createElement("input",{type:"file",name:"image",className:"form-control-file",onChange:t}),r.image.length>0&&u.a.createElement("span",{className:"errorMessage"},r.image)),u.a.createElement(b.a,{type:"submit",className:"btn-submit"},"Submit"),o&&u.a.createElement(b.a,{variant:"success",className:"ml-3",onClick:c},"Cancel"))))},R=function(e){var a=e.formErrors,t=e.rest,r=!0,n="";return Object.values(a).forEach((function(e){e.length>0&&(r=!1)&&(n=e),e.length>0&&(n=e)})),Object.values(t).forEach((function(e){null===e&&(r=!1)})),{valid:r,error:n}},L=function(e){function a(e){var t;return Object(n.a)(this,a),(t=Object(s.a)(this,Object(l.a)(a).call(this,e))).resetState=function(){t.setState({id:null,name:null,slug:null,parentId:"Top",description:null,order:null,image:null,isEditCategory:!1})},t.popover=function(e){return u.a.createElement(p.a,{id:"popover-basic"},u.a.createElement(p.a.Title,{as:"h3",className:"bg-warning text-white"},"Warning Message"),u.a.createElement(p.a.Content,null,"Are you sure You want to delete category.",u.a.createElement(b.a,{variant:"danger ml-3",onClick:function(){t.deleteCategory(e)}},"Yes")))},t.hideResponse=function(){t.setState({response:null})},t.submitHandler=function(e){e.preventDefault();var a=t.state,r=a.formErrors,n=a.name,o=a.order,s=a.description,l=a.image,c={name:n,parentId:t.state.parentId||t.selectOptionValueRef.current.value,order:o,description:s,image:l},i=R({rest:c,formErrors:r}),m=i.valid,u=i.error;if(m){var p=new FormData;Object.keys(c).forEach((function(e){c[e]&&p.append(e,c[e])})),Object(k.a)(t.props.auth.token),t.setState({loading:!0}),d.a.request({baseURL:"http://nest.rajdoctors.com",url:"/categories",method:"post",data:p}).then((function(e){t.setState({loading:!1,response:"Successfully created Category",responseClass:"success"}),t.props.onFetchCategoryLoader(),setTimeout(t.hideResponse,2e3)})).catch((function(e){var a=Object(S.a)(e);t.setState({loading:!1,response:a,responseClass:"danger"}),setTimeout(t.hideResponse,2e3)}))}else t.setState({response:"Please fill form corectly"+(u?" __ "+u.toUpperCase()+" __":""),responseClass:"danger"}),setTimeout(t.hideResponse,2e3)},t.editCategorysubmitHandler=function(e){e.preventDefault();var a=t.state,r=a.formErrors,n=a.id,o=a.name,s=a.order,l=a.description,c=a.image,i=a.slug,m=t.state.parentId||t.selectOptionValueRef.current.value,u=c?{id:n,name:o,slug:i,parentId:m,order:s,description:l,image:c}:{id:n,name:o,slug:i,parentId:m,order:s,description:l},p=R({rest:u,formErrors:r}),g=p.valid,h=p.error;if(g){t.resetState();var f=new FormData;Object.keys(u).forEach((function(e){u[e]&&f.append(e,u[e])})),Object(k.a)(t.props.auth.token),t.setState({loading:!0}),d.a.request({baseURL:"http://nest.rajdoctors.com",url:"/categories",method:"patch",data:f}).then((function(e){t.setState({loading:!1,response:"Successfully Updated Category",responseClass:"success"}),t.props.onFetchCategoryLoader(),setTimeout(t.hideResponse,2e3)})).catch((function(e){var a=Object(S.a)(e);t.setState({loading:!1,response:a,responseClass:"danger"}),setTimeout(t.hideResponse,2e3)})),t.resetState()}else t.setState({response:"Please fill form corectly"+(h?" __ "+h.toUpperCase()+" __":""),responseClass:"danger"}),setTimeout(t.hideResponse,2e3)},t.handleChange=function(e){var a=e.target,n=a.name,o=a.value,s=a.files,l=t.state.formErrors;switch(n){case"name":l.name=!O.a.isLength(o,{min:1,max:25})||O.a.contains(o,"_")||O.a.contains(o,"/")?"Category Name should not be emty, more than 25 charecter and contain '_,/'":"";break;case"description":l.description=O.a.isLength(o,{min:30,max:300})?"":"Description should be minimum 30 or maximum 300 characters";break;case"parentId":l.parentId="Top"===o||O.a.isInt(o)||O.a.isMongoId(o)?"":"ParentId is not valid";break;case"order":l.order=O.a.isNumeric(o)?"":"Order should be only number";break;case"image":l.image=O.a.isEmpty(o)?"Choose a valid image":""}t.setState(Object(r.a)({formErrors:l},n,s?s[0]:o))},t.state={loading:!1,id:null,name:null,slug:null,parentId:"Top",description:null,order:null,image:null,response:null,responseClass:"success",showEditCategoryComponent:!1,formErrors:{name:"",parentId:"",description:"",order:"",image:""}},t.selectOptionValueRef=u.a.createRef(),t}return Object(c.a)(a,e),Object(o.a)(a,[{key:"deleteCategory",value:function(e){var a=this;Object(k.a)(this.props.auth.token),this.setState({loading:!0}),d.a.delete("http://nest.rajdoctors.com/categories",{data:{id:e.id}}).then((function(t){a.setState({loading:!1,response:e.name+" deleted successfully",responseClass:"success"}),a.props.onFetchCategoryLoader(),setTimeout(a.hideResponse,2e3)})).catch((function(e){var t=Object(S.a)(e);a.setState({loading:!1,response:t,responseClass:"danger"}),setTimeout(a.hideResponse,2e3)}))}},{key:"componentDidMount",value:function(){this.props.onFetchCategoryLoader()}},{key:"render",value:function(){var e=this,a=this.props.category.categories;return u.a.createElement(u.a.Fragment,null,u.a.createElement(j.a,N.a.Category.metaInfo),this.state.loading&&u.a.createElement(v.a,{animation:"border",role:"status",variant:"dark",className:"content-center"}),this.state.response&&u.a.createElement(f.a,{variant:this.state.responseClass,className:"text-center content-center"},this.state.response),u.a.createElement(x,{submitHandler:this.submitHandler,handleChange:this.handleChange,formErrors:this.state.formErrors,categories:a,category:{name:this.state.name,parentId:this.state.parentId,order:this.state.order,description:this.state.description}}),u.a.createElement("div",{className:"mt-3"},u.a.createElement(h.a,null,u.a.createElement(h.a.Toggle,{as:C.a.Header,eventKey:"1"},u.a.createElement("h3",null,"Edit Category")),u.a.createElement(h.a.Collapse,{eventKey:"1"},u.a.createElement("div",{className:"mt-2 p-2"},a.map((function(t){return u.a.createElement(f.a,{variant:"primary"},t.slug,u.a.createElement(b.a,{className:"ml-2",onClick:function(){e.setState({id:t.id,slug:t.slug,name:t.name,parentId:t.parentId,order:t.order,description:t.description,showEditCategoryComponent:t.slug})}},"Edit"),u.a.createElement(g.a,{trigger:["click"],placement:"right",rootClose:!0,overlay:e.popover(t)},u.a.createElement(b.a,{className:"ml-2",variant:"danger",disabled:e.state.showEditCategoryComponent},"Delete")),u.a.createElement("div",null,e.state.showEditCategoryComponent===t.slug&&u.a.createElement(x,{submitHandler:e.editCategorysubmitHandler,handleChange:e.handleChange,loading:e.state.loading,formErrors:e.state.formErrors,categories:a,name:t.name,selectOptionValueRef:e.selectOptionValueRef,category:{name:e.state.name,parentId:e.state.parentId,order:e.state.order,description:e.state.description},showEditCategoryAccordionStateHandler:function(){e.setState({showEditCategoryComponent:!1})}})))})))))))}}]),a}(m.Component);a.default=Object(E.b)((function(e){return{auth:e.auth,category:e.category}}),(function(e){return{onFetchCategoryLoader:function(){return e(Object(I.c)())},onCreateCategoryloader:function(a){return e(Object(I.a)(a))}}}))(L)}}]);
//# sourceMappingURL=25.a8b80ec7.chunk.js.map